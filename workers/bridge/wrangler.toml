# Captain's Bridge - Web-based Editor for The Black Captain
# Accessible at bridge.blackhoard.com

name = "captain-bridge"
main = "src/index.ts"
compatibility_date = "2024-12-01"
workers_dev = true

# D1 Database for articles, users, credentials
[[d1_databases]]
binding = "DB"
database_name = "captain-bridge-db"
database_id = "e8577e15-31cf-4580-8f9e-f7a1387b12d2"

# KV Namespace for sessions and challenges
[[kv_namespaces]]
binding = "SESSIONS"
id = "0b1b1cc70e344686a17d224121052b43"

# Environment variables
[vars]
RP_ID = "bridge.blackhoard.com"
RP_NAME = "The Captain's Bridge"
RP_ORIGIN = "https://bridge.blackhoard.com"

# Secrets (set via wrangler secret put):
# - ANTHROPIC_API_KEY: Claude API key
# - GITHUB_TOKEN: For triggering deployments
# - SETUP_CODE: Initial registration code (optional, can be generated)

# Custom domain
[[routes]]
pattern = "bridge.blackhoard.com"
custom_domain = true
